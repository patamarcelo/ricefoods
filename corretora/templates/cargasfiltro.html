{% load bootstrap4 %}
{% load bootstrap %}
{% load humanize %}
{% load static %}
{% now "Y-m-d" as todays_date %}
{% load crispy_forms_tags %}
{% load  corretora_extras %}
{% load widget_tweaks %}
{% load mathfilters %}


<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=0.6 shrink-to-fit=no">
    <title>Corretora | Cargas Filtro</title>
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no"> -->
    {% bootstrap_css %}
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css">
    <!-- Font Awesome CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
        integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <!-- Google Fonts Roboto -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap">
    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <!-- Material Design Bootstrap -->
    <link rel="stylesheet" href="{% static 'css/mdb.min.css' %}">
    <!-- Your custom styles (optional) -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <!-- MDBootstrap Datatables  -->
    <link href="{% static 'css/addons/datatables.min.css' %}" rel="stylesheet">





    <style>
        .btn-xs {
            padding: 5px 10px;
            font-size: 10px;
            line-height: 1.0;

        }

        .my-table {
            overflow-x: auto;
            zoom: 80%;
        }

        table.width {
            width: 100%;
            margin: 20px auto;
            table-layout: auto;
            /* Optional */
            border-collapse: collapse;
            white-space: nowrap;
            margin-top: 5px;
        }

        td {
            border: 1px solid #000;
        }


        .tab {
            position: absolute;
            right: 250px;
            margin-top: 10px;
        }

        thead {
            background-color: #111111;
        }

    </style>
    <style>
        .table-hover>tbody>tr:hover>td,
        .table-hover>tbody>tr:hover>th {
            background-color: #111111;
            color: whitesmoke;
        }



        body {
            background-color: #363639;
            color: blanchedalmond;
        }

        .tabini {
            background-color: #1c1c1c;
            color: blanchedalmond;
            margin-bottom: 40px;

        }

        /* .sombra {
            box-shadow: 5px 5px 5px 5px black;
        } */

        .sombra {
            -moz-box-shadow:    inset 0 0 20px #000000;
            -webkit-box-shadow: inset 0 0 20px #000000;
            box-shadow:         inset 0 0 20px #000000;
        }

        table {
            width: 50%
        }



        .caixatexto label:not(.skip) {

            display: inline-block;
            margin-top: 2px;
            margin-bottom: 2px;
            font-size: .700rem;

        }

        .check2 input:not(.skip) {
            margin: 0px;
            padding: 0px;
            width: 20px
        }

        .checkbox-inline {
            font-size: .890rem;

        }


        #select-all {
            margin-right: 4px;            
            width: 12px !important;
            text-align: center;
            vertical-align: middle;

        }

        .fa-check {
            font-size: 18px;
            padding-bottom: 6px;
            vertical-align: middle;


        }

        input[type=text],
        .numberinput {
            border-radius: 4px;
            -moz-border-radius: 4px;
            -webkit-border-radius: 4px;
            box-shadow: 1px 1px 2px #333333;
            -moz-box-shadow: 1px 1px 2px #333333;
            -webkit-box-shadow: 1px 1px 2px #333333;
            background: #cccccc;
            border: 1px solid #000000;
            width: 150px;
            font-size: .700rem;
            height: 23px;
            width: 100px;
            margin-bottom: 0px;
            padding: 4px;

        }

        .select,
        .select-all {
            height: 23px;
            width: 100px;
            font-size: .800rem;

        }

        input[type=text]:hover,
        input[type=number]:hover,
        input[type=checkbox]:hover,
        #id_ordering:hover,
        #id_situacao:hover,
        #id_comcomissao:hover,
        #id_pgcomissaoa:hover,
        textarea:hover {
            background: #ffffff;
            border: 3px solid #0275d8;            
        }

        .form-row {
            margin-bottom: 0px;
            margin-top: 0px;

        }

        .form-group {
            margin-top: 3px;
            margin: 0px;
            padding: 1px
        }



        .btnfiltrar {

            margin-top: 0px;
            margin-bottom: 10px;

        }

        label {
            margin-bottom: 0px;
        }

        .checkcheck {
            margin-top: 15px;
            margin-bottom: 15px;
        }



        .custom-select-sm {
            height: 26px;
        }

        #id_ordering {
            width: 104px;
        }

        .dataTables_info,
        .bs-select {
            text-align: left;
            color: whitesmoke;
            font-size: .990rem;
            text-align: bottom;
        }


        .linhatitulototal {
            white-space: normal;
            display: flex;
            flex-wrap: nowrap;   
        }

        .linhatitulototal:first-child {
            text-align:left;
        }

        .titulototal {
            max-width: 14% !important;
                                     
        }
 
        .titulototal > p {
            margin-bottom: 0px; 
            display: flex;
            flex-wrap: nowrap;                    
        }

        .titulototaldireita, .titulototaldireita > p {
            margin-bottom: 0px;
            padding: 0px;
        }
        
        .pesostitulo {            
            white-space: nowrap;
            margin-right:                    
        }
        
        @media (min-width:300px) and  (max-width:900px) {
            .titulototal {                
                margin-right: 25px;
            }
        }


        /* @media (min-width:300px) and  (max-width:980px) {
            #cargas4, #filtro, .linhatitulototal {                
                zoom: 72%;
            }
        } */
        
        @media (min-width:300px) and  (max-width:1112px) {
            #cargas4  {                
                zoom: 50%;
            }
        }

        @media (max-width: 1112px) {
            .fa-file-excel {                
                display: none;
            }
        }

        p.agendado {
        opacity: 0;
        -webkit-animation: fadeIn 1000ms linear;
        -moz-animation: fadeIn 1000ms linear;
        -o-animation: fadeIn 1000ms linear;
        animation: fadeIn 1000ms linear; 
        -webkit-animation-fill-mode:forwards;
        -moz-animation-fill-mode:forwards;
        -o-animation-fill-mode:forwards;
        animation-fill-mode:forwards;

        -webkit-animation-direction:alternate;
        animation-iteration-count:infinite;
        animation-iteration-count:infinite;
        -moz-animation-iteration-count:infinite;
        -webkit-animation-iteration-count:infinite;
        }

        b.time {
        opacity: 0;
        -webkit-animation: fadeIn 1000ms linear;
        -moz-animation: fadeIn 1000ms linear;
        -o-animation: fadeIn 1000ms linear;
        animation: fadeIn 1000ms linear; 
        -webkit-animation-fill-mode:forwards;
        -moz-animation-fill-mode:forwards;
        -o-animation-fill-mode:forwards;
        animation-fill-mode:forwards;

        -webkit-animation-direction:alternate;
        animation-iteration-count:infinite;
        animation-iteration-count:infinite;
        -moz-animation-iteration-count:infinite;
        -webkit-animation-iteration-count:infinite;
        }

        .transpcheck {
            margin: 0px 10px;
        }

      
        .checkcheck2 {
            margin-top: 12px;
        }

        .secondbox {
            padding-top: 0px;
            border-style: inset;
            padding: 10px 20px;  
            background-color: #2c2c2f; 
            width: 93%;                                          
        }

        .firstbox {
            margin-top: 12px;
        }
       
        .firstbox .badge {
            margin-bottom: 3px;            
        }

        .firstbox p {
            /* text-decoration: underline; */
            cursor: pointer;
            display: inline-block;
        }

        .firstbox input {
            margin-left: 12px;
        }


        table, th, td {
            border: 1px solid black;
        }
        th {
            cursor: pointer;
        }

        th:hover {
            cursor: pointer;
            color: blanchedalmond;
            text-decoration: underline;
        }

        #secondboxout,
        #filtro {
            overflow:hidden;
            max-height: 2050px;
            transition: max-height ease-in-out;
            transition-duration: 120ms, 2s;
        }

        #secondboxout.hide,
        #filtro.hide {
            max-height: 0;
            pointer-events: none;       
        }

        .first_caixatexto {
            margin-top: 12px;
        }

        
        .clicked {
            background-color: #111111 !important;
            color: whitesmoke !important;
        }
        
    </style>
    <!--Favicon-->
    <link rel="icon" href="{% static 'images/favicon.png' %}">

</head>

<body>
    <div class="container-fluid" align="center">
        <br />
        <div class="row">
            <div class="col-3" >
                <h3 style="float: left;"><u> <strong><a href="{% url 'cargasfiltro' %}" style="color: blanchedalmond">Cargas | Filtro</a></strong></u></h3>
            </div>
            <div class="col-9">
                <a class="btn btn-outline-danger btn-sm" style="float: right;" href="{% url 'logout' %}">Sair</a>
                <a class="btn btn-dark btn-sm" style="float: right;" href="{% url 'index2' %}">Inicio</a>

            </div>
            <div class="container" align="center">
                <div class="col-7">
                    {% if messages %}
                    <div class="container">
                        <div class="row">
                            <div class="col-10 col-sm-qw col-sm-offset-2">
                                <div class="alert alert-success alert-dismissible" role="alert">
                                    <button type="button" class="close" data-dismiss="alert"><span
                                            aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                                    {% for m in messages %}
                                    {{ m }} <br />
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {% endif %}

            </div>
        </div>
        <br>
        <div class="d-flex container-fluid" style="float: left; margin-left: 10px">
            <div class="row">
                <div class="col-3-sm">
                    <a class="btn btn-primary btn-sm" href="{% url 'add_cargas' %}">Adicionar Cargas</a>
                </div>
                <div class="col-3-sm">
                    <a class="btn btn-outline-success btn-sm" href="{% url 'add_age_cargas' %}"
                        target="_blank">Agendar</a>
                </div>

                <a class="btn btn-outline-warning btn-sm" href="javascript:history.back()">Voltar</a>
                <div class="col-3-sm">
                    <button type="button" class="btn btn-outline-info btn-sm"
                        onclick="Ocultarfiltros('filtro')">Filtros</button>
                </div>
                <div class="col-3-sm">
                    <a class="btn btn-outline-primary btn-sm" href="{% url 'agendamento' %}"
                        target="_blank">Descarga Ruston</a>
                </div>
            </div>
        </div>
                <div class="d-flex container-fluid" style="margin-left: 6px;">
                    <small> {% now "SHORT_DATE_FORMAT" %} <b class="time"> {% now "H:i" %}</b></small>
                </div>
            
        <br>
    </div>



    

    <div class="container tabini sombra" id="filtro">

        <form method="get" id="myform">
            <div class="form-group">
                <div class="form-row caixatexto first_caixatexto">
                    <div class="col-2 form-group form-control-sm" data-toggle="tooltip" title="Motorista"
                        data-placement="bottom" placeholder="Motorista" autocomplete="on">
                        {{ filter.form.motorista__icontains|as_crispy_field }}
                    </div>
                    <div class="col-2 form-group" data-toggle="tooltip" title="Placa" data-placement="bottom"
                        placeholder="Placa">

                        {{ filter.form.placa__icontains|as_crispy_field }}
                    </div>

                    <div class="col-2 form-group" data-toggle="tooltip" title="Nota Fsical" data-placement="bottom"
                        placeholder="NF">
                        {{ filter.form.notafiscal__icontains|as_crispy_field }}
                    </div>
                    <div class="col-2 form-group" data-toggle="tooltip" title="Data" data-placement="bottom"
                        placeholder="Data">
                        {{ filter.form.data|as_crispy_field }}
                    </div>
                    <div class="col-2 form-group" data-toggle="tooltip" title="Data" data-placement="bottom"
                        placeholder="Data">
                        {{ filter.form.data__gte|as_crispy_field }}

                    </div>
                    <div class="col-2 form-group" data-toggle="tooltip" title="Data" data-placement="bottom"
                        placeholder="Data">
                        {{ filter.form.data__lte|as_crispy_field }}
                    </div>
                </div>
                <div class="form-row caixatexto">
                    <div class="col-2 form-group" data-toggle="tooltip" title="Contrato" data-placement="bottom"
                        placeholder="Contrato">
                        {{ filter.form.pedido__contrato__icontains|as_crispy_field }}
                    </div>

                    <div class="col-2 form-group" data-toggle="tooltip" title="Fornecedor" data-placement="bottom"
                        placeholder="Fornecedor">
                        {{ filter.form.pedido__fornecedor__nome__icontains|as_crispy_field }}
                    </div>
                    <div class="col-2 form-group" data-toggle="tooltip" title="Cliente" data-placement="bottom"
                        placeholder="Cliente">
                        {{ filter.form.pedido__cliente__nome_fantasia__icontains|as_crispy_field }}
                    </div>

                    <div class="col-2 form-group" data-toggle="tooltip" title="Peso" data-placement="bottom"
                        placeholder="Peso">
                        {{ filter.form.peso__icontains|as_crispy_field }}
                    </div>
                    <div class="col-2 form-group" data-toggle="tooltip" title="Peso" data-placement="bottom"
                        placeholder="Peso">
                        {{ filter.form.peso__gte|as_crispy_field }}
                    </div>
                    <div class="col-2 form-group" data-toggle="tooltip" title="Peso" data-placement="bottom"
                        placeholder="Peso">
                        {{ filter.form.peso__lte|as_crispy_field }}
                    </div>
                    <div class="col-2 form-group" data-toggle="tooltip" title="Ordem" data-placement="bottom"
                        placeholder="Ordem">
                        {{ filter.form.ordering|as_crispy_field }}
                    </div>
                    <div class="col-2 form-group" data-toggle="tooltip" title="Situacao" data-placement="bottom"
                        placeholder="Situacao">
                        {{ filter.form.situacao|as_crispy_field }}
                    </div>
                    <div class="col-2 form-group" data-toggle="tooltip" title="Cidade" data-placement="bottom"
                        placeholder="Cidade">
                        {{ filter.form.pedido__fornecedor__cidade__cidade__icontains|as_crispy_field }}
                    </div>

                    <div class="col-2 form-group" data-toggle="tooltip" title="Valor NF" data-placement="bottom"
                        placeholder="Valor NF">
                        {{ filter.form.valornf__icontains|as_crispy_field }}
                    </div>
                    <div class="col-2 form-group" data-toggle="tooltip" title="Valor NF" data-placement="bottom"
                        placeholder="Valor NF">
                        {{ filter.form.valornf__gte|as_crispy_field }}

                    </div>
                    <div class="col-2 form-group" data-toggle="tooltip" title="Valor NF" data-placement="bottom"
                        placeholder="Valor NF">
                        {{ filter.form.valornf__lte|as_crispy_field }}
                    </div>
                    {% if user.is_superuser%}
                    <div class="col-2 form-group" data-toggle="tooltip" title="Com Comissao?" data-placement="bottom"
                        placeholder="Com Comissao?">
                        {{ filter.form.comcomissao|as_crispy_field }}
                    </div>
                    <div class="col-2 form-group" data-toggle="tooltip" title="Comissao Paga?" data-placement="bottom"
                        placeholder="Comissao Paga?">
                        {{ filter.form.pgcomissaoa|as_crispy_field }}
                    </div>
                    {% else %}
                    {% endif %}
                    <div class="col-2 form-group" data-toggle="tooltip" title="Produto" data-placement="bottom"
                    placeholder="Produto">
                    {{ filter.form.pedido__produto__icontains|as_crispy_field }}
                    </div>
                    <div class="col-2 form-group" data-toggle="tooltip" title="Descarga" data-placement="bottom"
                        placeholder="Descarga">
                        {{ filter.form.data_agenda|as_crispy_field }}
                    </div>
                    <div class="col-2 form-group" data-toggle="tooltip" title="Descarga" data-placement="bottom"
                        placeholder="Descarga">
                        {{ filter.form.data_agenda__gte|as_crispy_field }}

                    </div>
                    <div class="col-2 form-group" data-toggle="tooltip" title="Descarga" data-placement="bottom"
                        placeholder="Descarga">
                        {{ filter.form.data_agenda__lte|as_crispy_field }}
                    </div>
                </div>
                <div class="row">

                    <div class="col firstbox" id="badgetransp1"><i><h6><p onclick="Mudarestado('secondboxout')" class="badge badge-info" id="badgetransp" name="badgettrans">Transportadoras</p><input type="checkbox" id="select-all" class="select-all"></h6></i>
                       <div class="container {% if '&transp=' in request.get_full_path %}{% else %} hide {% endif %}" id="secondboxout">
                            <div class="container sombra secondbox" id="secondbox">
                                <div class="col-12 d-flex justify-content-center checkcheck">
                                    {% for choice in filter.form.transp|slice:"0:7" %}
                                    <label class="checkbox-inline  transpcheck">
                                        {{ choice.tag }} {{ choice.choice_label }} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    </label>{% endfor %}
                                </div>
                                
                                <div class="col-12 d-flex justify-content-center checkcheck checkcheck2">
                                    
                                    {% for choice in filter.form.transp|slice:"7:" %}
                                    <label class="checkbox-inline transpcheck">
                                        {{ choice.tag }} {{ choice.choice_label }} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    </label>{% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="container" style="justify-content:center; padding-bottom: 0px !important; padding: 15px;">
                    <button type="submit" class="btn btn-primary btn-xs btnfiltrar" id="btnfiltrar">Filtrar</button>

                    {% if request.get_full_path ==  "/corretora/cf" %}
                    {% else %}
                    <i type="submit" style="color:grey; margin-bottom: 20px; float: right;" class="fas fa-lg fa-file-pdf" id="pdf" onclick="createPDF()"
                        target="_blank"></i>
                    <i type="submit" style="color:green; margin-bottom: 20px; float: right; margin-right: 10px;"
                        class="fas fa-lg fa-file-excel" id="btnExport"></i>
                    {% endif %}
                </div>
            </div>
        </form>
    </div>

    {% if request.get_full_path ==  "/corretora/cf" %}
    <div class="my-table container-fluid" id="cargasfiltro">
        <table id="cargas4" class="width table-round-corner  table  table-striped table-dark table-bordered table-sm"
            width="100%">
            <thead class="borderless">
                <tr>

                    <th scope="col"><a class="text-info fa fa-sort-desc"></a></th>
                    <th scope="col">Pedido</th>
                    <th scope="col">Transp.</th>
                    <th scope="col">Buonny</th>
                    <th scope="col">Situação</th>
                    <th scope="col">Ordem</th>
                    <th scope="col">Data</th>
                    <th scope="col">Placa</th>
                    <th scope="col">Motorista</th>
                    <th scope="col">Frete</th>


                    <th scope="col">Peso</th>
                    <th scope="col">NF</th>
                    <th scope="col">Valor NF</th>
                    <th scope="col">Fornecedor</th>
                    <th scope="col">Origem</th>
                    <th scope="col">Cliente</th>
                    <th scope="col">Produto</th>
                    <th scope="col">Descarga</th>
                    <th scope="col" class="text text-center">Class.</th>
                    {% if user.is_superuser%}
                    <th scope="col" class="text text-center">Comiss.</th>
                    {% endif %}
                    <th scope="col" class="text text-center">Ação</th>

                </tr>
            </thead>
            <tbody>
                {% if user.is_superuser%}
                <tr>
                    <th class="text text-info" scope="row" colspan="21" style="font-size: 18px;"><strong>Filtre os dados!!</strong></th>
                </tr>
                {% else %}
                <tr>
                    <th class="text text-info" scope="row" colspan="20" style="font-size: 18px;"><strong>Filtre os dados!!</strong></th>
                </tr>
                {% endif %}
            </tbody>
            {% elif  page_obj.paginator.count == 0 %}

            <div class="my-table container-fluid" id="cargasfiltro4">
                <table id="cargas5" class="width table-round-corner  table  table-striped table-dark table-bordered table-sm"
                    width="100%">
                    <thead class="borderless">
                        <tr>
        
                            <th scope="col"><a class="text-info fa fa-sort-desc"></a></th>
                            <th scope="col">Pedido</th>
                            <th scope="col">Transp.</th>
                            <th scope="col">Buonny</th>
                            <th scope="col">Situação</th>
                            <th scope="col">Ordem</th>
                            <th scope="col">Data</th>
                            <th scope="col">Placa</th>
                            <th scope="col">Motorista</th>
                            <th scope="col">Frete</th>
        
        
                            <th scope="col">Peso</th>
                            <th scope="col">NF</th>
                            <th scope="col">Valor NF</th>
                            <th scope="col">Fornecedor</th>
                            <th scope="col">Origem</th>
                            <th scope="col">Cliente</th>
                            <th scope="col">Descarga</th>
                            <th scope="col" class="text text-center">Class.</th>
                            {% if user.is_superuser%}
                            <th scope="col" class="text text-center">Comiss.</th>
                            {% endif %}
                            <th scope="col" class="text text-center">Ação</th>
        
                        </tr>
                    </thead>
                    <tbody>
                        {% if user.is_superuser%}
                        <tr>
                            <th class="text text-danger" scope="row" colspan="20" style="font-size: 18px;"><strong>Sem dados para os filtros selecionados!!</strong></th>
                        </tr>
                        {% else %}
                        <tr>
                            <th class="text text-danger" scope="row" colspan="19" style="font-size: 18px;"><strong>Sem dados para os filtros selecionados!!</strong></th>
                        </tr>
                        {% endif %}
            {% else %}

            <div class="my-table container-fluid" id="cargasfiltro">
                <table id="cargas4"
                    class="width table-round-corner  table table-hover table-striped table-dark table-bordered table-sm"
                    width="100%" style="zoom: 92%">
                    <thead class="borderless">
                        <tr>

                            <th scope="col"><a class="text-info fa fa-sort-desc"></a></th>
                            <th scope="col">Pedido</th>
                            <th scope="col">Transp.</th>
                            <th scope="col">Buonny</th>
                            <th scope="col">Situação</th>
                            <th scope="col">Ordem</th>
                            <th scope="col">Data</th>
                            <th scope="col">Placa</th>
                            <th scope="col">Motorista</th>
                            <th scope="col">Frete</th>

                            <th scope="col">Peso</th>
                            <th scope="col">NF</th>
                            <th scope="col">Valor NF</th>
                            <th scope="col">Fornecedor</th>
                            <th scope="col">Origem</th>
                            <th scope="col">Cliente</th>
                            <th scope="col">Produto</th>
                            <th scope="col">Descarga</th>
                            <th scope="col" class="text text-center">Class.</th>
                            {% if user.is_superuser%}
                            <th scope="col" class="text text-center">Comiss.</th>
                            {% endif %}
                            <th scope="col" class="text text-center">Ação</th>

                        </tr>
                    </thead>
                    <tbody>
                        {% for carga in object_list %}                        
                        <tr class="simplehighlight">
                            <td>{{ page_obj.start_index|add:forloop.counter0 }}</td>
                            {% if carga.pedido.situacao == "a" %}
                            <td><a href="{% url 'detail_cargas' carga.pedido.pk %}" target="_blank"
                                    class="text-success">{{ carga.pedido }}</a></td>

                            {% elif 'b' in carga.pedido.situacao %}
                            <td><a href="{% url 'detail_cargas' carga.pedido.pk %}" target="_blank"
                                    class="text-danger"><strong>{{ carga.pedido }}</strong></a></td>
                            {% elif carga.pedido.situacao == 'c' %}
                            <td><a href="{% url 'detail_cargas' carga.pedido.pk %}" target="_blank"
                                    class="text-info">{{ carga.pedido }}</a></td>
                            {% else %}
                            <td>{{ carga.pedido }}</td>
                            {% endif %}


                            {% if 'GDX' in carga.transp|upper %}
                            <td>{{ carga.transp|title }}</td>
                            {% else %}
                            <td style="background-color: #660066;">{{ carga.transp|title }}</td>
                            {% endif %}

                            {% if 'dast' in carga.buonny|lower %}
                            <td class="text-danger"><strong>{{ carga.buonny|title }}</strong></td>
                            {% elif 'sul' in carga.buonny|lower %}
                            <td class="text-warning"><strong>{{ carga.buonny|title }}</strong></td>
                            {% elif 'nviado' in carga.buonny|lower or 'nviada' in carga.buonny|lower %}
                            <td class="text-info"><strong>{{ carga.buonny|title }}</strong></td>
                            {% else %}
                            <td class="text-success"><strong>{{ carga.buonny|title }}</strong></td>
                            {% endif %}
                            {% if carga.situacao == 'Agendado' %}
                            <td class="text-warning"><strong>{{ carga.situacao }}</strong></td>
                            {% elif carga.situacao == 'Carregado' %}
                            <td class="text-success"><strong>{{ carga.situacao }}</strong></td>
                            {% else %}
                            <td>{{ carga.situacao }}</td>
                            {% endif %}


                            {% if carga.ordem %}
                            <td class="text-success"><em>Enviada</em></td>
                            {% else %}
                            <td class="text-danger"><em>Não Env.</em></td>
                            {% endif %}

                            {% if todays_date == carga.data|date:"Y-m-d" %}
                            <td class="text-primary"><strong>{{ carga.data|date:"SHORT_DATE_FORMAT" }}</strong></td>
                            {% elif todays_date > carga.data|date:"Y-m-d" and carga.situacao == 'Agendado' and carga.ordem == False %}
                            <td class="text-danger"><strong>{{ carga.data|date:"SHORT_DATE_FORMAT" }}</strong></td>
                            {% else %}
                            <td>{{ carga.data|date:"SHORT_DATE_FORMAT" }}</td>
                            {% endif %}

                            {% if carga.situacao == 'Agendado' and carga.ordem == False %}
                            {% if carga.situacao == 'Agendado' and carga.chegada == True %}

                            <td><a class="text text-success" style='font-style:italic'
                                    href="{% url 'upd_chegada' carga.pk %}" target="_blank"><strong>{{ carga.placa|upper|slice:":3"}}-{{ carga.placa|upper|slice:"3:"}}
                                    </strong></a></td>
                            {% else %}
                            <td><a class="text text-warning" style='font-style:italic'
                                    href="{% url 'upd_chegada' carga.pk %}" target="_blank"><strong>{{ carga.placa|upper|slice:":3"}}-{{ carga.placa|upper|slice:"3:"}}</strong></a>
                            </td>
                            {% endif %}
                            {% else %}
                            <td>{{ carga.placa|upper|slice:":3"}}-{{ carga.placa|upper|slice:"3:"}}</td>
                            {% endif %}






                            {% if carga.obs and carga.tac %}
                            <td style="background-color: #7a1b0c; opacity: 0.8;"><abbr class="text-warning"
                                    title="{{ carga.obs }}"><em>{{ carga.motorista|title }}</em></abbr>
                            </td>
                            {% elif carga.obs %}
                            <td><abbr class="text-warning"
                                    title="{{ carga.obs }}"><em>{{ carga.motorista|title }}</em></abbr>
                            </td>
                            {% elif carga.tac %}
                            <td style="background-color: #7a1b0c; opacity: 0.8">
                                <em>{{ carga.motorista|title }}</em></abbr>
                            </td>
                            {% else %}
                            <td>{{ carga.motorista|title }}</td>
                            {% endif %}

                            {% if carga.valor_mot == None %}
                            <td align=left>R$ &nbsp;&nbsp;&nbsp;&nbsp;- </td>
                            {% else %}
                            <td>R$ {{ carga.valor_mot }}</td>
                            {% endif %}
                            
                            {% if carga.peso == 0 %}
                            <td class="text-warning"><strong>{{ carga.veiculo|intcomma }} Kg </strong></td>
                            {% elif carga.peso < 18000 and carga.peso > 0  %}
                            <td style="color:darkorange"><i>{{ carga.peso|intcomma }} Kg </i></td>
                            {% else %}
                            <td>{{ carga.peso|intcomma }} Kg </td>
                            {% endif %}

                            {% if carga.notafiscal == None %}
                            <td class="text-danger"><strong>Sem NF</strong></td>
                            {% elif carga.notafiscal|length <= 4 %}
                            <td>
                                {{ carga.notafiscal }}
                            </td>
                            {% elif carga.notafiscal|length <= 6 %}
                            <td>
                                {{ carga.notafiscal|slice:"-6:-3" }}.{{ carga.notafiscal|slice:"-3:" }}
                            </td>
                            {% elif carga.notafiscal|length > 6 and carga.notafiscal|length < 8 %}
                            <td>
                                {{ carga.notafiscal|slice:"-9:-6" }}.{{ carga.notafiscal|slice:"-6:-3" }}.{{ carga.notafiscal|slice:"-3:" }}
                            </td>

                            {% elif carga.notafiscal|length == 8 %}
                            <td>
                                0{{ carga.notafiscal|slice:"-9:-6" }}.{{ carga.notafiscal|slice:"-6:-3" }}.{{ carga.notafiscal|slice:"-3:" }}
                            </td>
                            {% elif carga.notafiscal|length > 8 %}
                            <td>
                                {{ carga.notafiscal|slice:"-9:-6" }}.{{ carga.notafiscal|slice:"-6:-3" }}.{{ carga.notafiscal|slice:"-3:" }}
                            </td>
                            {% else %}
                            <td>{{carga.notasfiscal}}</td>
                            {% endif %}

                            {% if carga.valornf == None %}
                            <td align=left>R$ &nbsp;&nbsp;&nbsp;&nbsp;- </td>
                            {% else %}

                            <td>R$
                                {{ carga.valornf }}
                            </td>
                            {% endif %}

                            {% if  'PALMARES' in carga.pedido.fornecedor.nome|upper %}
                            <td style="background-color: #9400d3;">Palmares
                            </td>
                            {% else %}
                            <td>{{ carga.pedido.fornecedor.nome|title|truncatechars:20 }}</td>
                            {% endif %}
                            <td>{{ carga.pedido.fornecedor.cidade.cidade|truncatechars:18 }}</td>
                            
                            <td style="color: {{ carga.pedido.cliente.color}}"><em><strong>{{ carga.pedido.cliente|upper }}</strong></em></td>
                            
                            <td>{{ carga.pedido.produto }}</td>
                        
                            {% if carga.data_intervalo_cargaedescarga > -2 %}
                            <td style="background-color: rgba(139,0,0, 0.7);"><strong>{{ carga.data_agenda|date:"SHORT_DATE_FORMAT" }}</strong></td>
                            {% elif carga.data_agenda %}
                            <td>{{ carga.data_agenda|date:"SHORT_DATE_FORMAT" }}</td>
                            {% else %}
                            <td align="center"><i class="text-warning fab fa-algolia"></i>
                            {% endif %}
                        
                            {% if carga.pedido.produto == "Arroz em Casca" %}
                            {% if carga.renda and carga.inteiro and carga.impureza >= 0 and carga.umidade  and carga.gessado >= 0 and carga.bbranca >= 0 and carga.amarelo >= 0 and carga.manchpic >= 0 and carga.vermelhos >= 0 %}
                            <td align="center"><a class="text-success fa fa-list-alt"
                                    href="{% url 'upd_class' carga.pk %}" target="_blank"></a>
                                {% elif carga.renda or carga.inteiro or carga.impureza or carga.umidade %}
                            <td align="center"><a class="text-warning fa fa-list-alt"
                                    href="{% url 'upd_class' carga.pk %}" target="_blank"></a>
                            </td>
                            {% else %}
                            <td align="center"><a class="text-danger fa fa-list-alt"
                                    href="{% url 'upd_class' carga.pk %}" target="_blank"></a>
                                {% endif %}
                                {% else %}
                            <td align="center"><b> - </b></td>
                            {% endif %}




                            {% if user.is_superuser%}
                            {% if carga.comissaocasca > 1 %}

                            {% if carga.pgcomissao == True %}

                            <td align=center><a class="text text-success" style='font-style:italic'
                                    href="{% url 'upd_comiss' carga.pk %}" target="_blank"><b>R$
                                        {{ carga.vpcomissaoc|floatformat:2 }}</b></a></td>
                            {% elif carga.pgcomissao == False and carga.vpcomissaoc > 0 %}
                            <td align=center><a class="text text-danger" style='font-style:italic'
                                    href="{% url 'upd_comiss' carga.pk %}" target="_blank"><b>R$
                                        {{ carga.vpcomissaoc|floatformat:2 }}</b></a></td>
                            {% else %}
                            <td align=center><a class="text text-warning" style='font-style:italic'
                                    href="{% url 'upd_comiss' carga.pk %}" target="_blank"><b>R$
                                        {{ carga.comissaocasca|floatformat:2 }}</b></a></td>
                            {% endif %}
                            {% else %}
                            <td align=center>- </td>

                            {% endif %}
                            {% else %}
                            {% endif %}
                            {% if carga.situacao == 'Agendado'  and carga.pedido.situacao == 'a' %}
                            <td align=center>
                                <a class="btn btn-warning btn-xs" href="{% url 'upd_cargas' carga.pk %}" target="_blank">Edit</a>
                                <a class="btn btn-danger btn-xs" href="{% url 'del_cargas' carga.pk %}" target="_blank">Del</a>
                            </td>
                            {% elif carga.situacao == 'Carregado'  and carga.pedido.situacao == 'a' %}
                            <td align=center>
                                <a class="btn btn-warning btn-xs" href="{% url 'upd_cargas' carga.pk %}" target="_blank">Edit</a>
                            </td>
                            {% else %}
                            <td align=center>-</td>
                            {% endif %}
                        </tr>                                                
                        {% endfor %}
                    </tbody>
                    {% if agendatotal.veiculo__sum == None %}  
                    <div class="container-fluid">
                        <div class="row linhatitulototal">
                                      
                            <div class="col titulototal">
                                {% if pesototal.peso__sum == None %}                    
                                {% else %}
                                <p ><strong>Carregado <i style="color: whitesmoke;"><br/> {{ pesototal.peso__sum }} Kg</i></strong></p>
                            </div>  
                            {% if user.is_superuser%}
                            {% if comitotal == 0 %}
                            {% else %}
                            <div class="col titulototaldireita">
                                <p style="float: right;" ><strong>Aberto <i class="text text-warning"><br/> R$ {{ comitotal|floatformat:"2" }}</i></strong></p>
                            </div>  
                            {% endif %}
                            {% else %}
                            {% endif %}  
                            {% endif %}  
                            
                        </div>
                    </div>                    
                    {% else %}
                    <div class="container-fluid">
                        <div class="row linhatitulototal">
                            {% if pesototal.peso__sum == None %}                    
                            {% else %}
                            <div class="col titulototal">
                                <p ><strong>Carregado <i class="pesostitulo" style="color: whitesmoke;"><br/>{{ pesototal.peso__sum }} Kg</i></strong></p>
                            </div>  
                           
                            {% endif %}  
                            <div class="col titulototal">
                                {% if agendatotal.veiculo__sum == None %}                    
                                {% else %}
                                <p class="agendado"><strong>Agendado <i class="text text-warning pesostitulo" ><br/>{{ agendatotal.veiculo__sum }} Kg</i></strong></p>
                                {% endif %}        
                            </div>             
                            {% if pesototal.peso__sum == None and agendatotal.peso__sum == None %}
                            {% else %}
                            <div class="col titulototal">                                
                                <p ><strong>Total <i class="text text-info pesostitulo"><br/>{{ pesototal.peso__sum|addition:agendatotal.veiculo__sum }} Kg</i></strong></p>
                            </div>  
                            {% endif %}
                            {% if user.is_superuser%}
                            {% if comitotal == 0 %}
                            {% else %}
                            <div class="col titulototaldireita">
                                <p style="float: right;" ><strong>Aberto <i class="text text-warning"><br/> R$ {{ comitotal|floatformat:"2" }}</i></strong></p>
                            </div>  
                            {% endif %}
                            {% else %}
                            {% endif %}
                        </div>
                    </div>
                    {% endif %}
                </table>

                <!--aisuhdioashiduhasihdiuashaiosudh-->
                {% if is_paginated %}

                <nav aria-label="Page navigation">
                    <ul class="pagination pagination-md">
                        {% if page_obj.has_previous %}
                        <li class="page-item">
                            <a class="page-link" style="color: blanchedalmond" href="?{% param_replace page=1 %}"
                                aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                                <span class="sr-only">begin</span>
                            </a>

                            {% else %}
                        <li class="page-item disabled"><a class="page-link" href="#">&laquo;</a></li>
                        </li> {% endif %}

                        {% for n in page_obj.paginator.page_range %}
                        {% if page_obj.number == n %}
                        <li class="page-item active">
                            <span class="page-link" style="color: blanchedalmond">{{ n }}<span
                                    class="sr-only">(current)</span></span>
                        </li>
                        {% elif n > page_obj.number|add:'-5' and n < page_obj.number|add:'5' %}
                        <li style="color: blanchedalmond" class="page-item"><a style="color: blanchedalmond"
                                class="page-link" href="?{% param_replace page=n %}">{{ n }}</a></li>
                        {% endif %}
                        {% endfor %}

                        {% if page_obj.has_next %}
                        <li class="page-item">
                            <a style="color: blanchedalmond" class="page-link"
                                href="?{% param_replace page=paginator.num_pages %}" aria-label="Next">
                                <span aria-hidden="true">&raquo;</span>
                                <span class="sr-only">end</span>
                            </a>
                            {% else %}
                        <li class="page-item disabled"><a class="page-link" href="#">&raquo;</a></li>
                        </li>
                    </ul>
                    {% endif %}
                </nav>
                {% endif %}

                {% if page_obj.paginator.count > 100 %}
                <p style="float: left;"><strong>Mostrando {{ page_obj.start_index }} - {{ page_obj.end_index }} de
                        {{ page_obj.paginator.count }} Cargas </strong></p>

                {% else %}
                <p style="float: left;"><strong> Total: {{ page_obj.end_index }}
                     Cargas </strong></p>

                {% endif %}
                <p><span style="float: right;"><strong>{% now "SHORT_DATETIME_FORMAT" %}
                    </span></strong></p>
            </div>
        </table>
    </div>

    <!--------------------------Excel-------------------------------------------------------------->
    <div class="my-table container-fluid" id="cargasfiltro2" style="display: none">
        <p><span style="float: right; font-size: 12px;margin-bottom: 7px;text-decoration: underline;"><strong>{% now "SHORT_DATETIME_FORMAT" %}
        </span></strong></p>
        
        <table id="cargas4"
            class="width table-round-corner  table table-hover table-striped table-dark table-bordered table-sm"
            width="100%">
            <thead class="borderless">
                <tr>

                    <th scope="col"><a class="text-info fa fa-sort-desc"></a></th>
                    <th scope="col">Pedido</th>
                    <th scope="col">Transp.</th>
                    
                    <th scope="col">Situação</th>
                    <th scope="col">Ordem</th>
                    <th scope="col">Data</th>
                    <th scope="col">Placa</th>
                    <th scope="col">Motorista</th>


                    <th scope="col">Peso</th>
                    <th scope="col">NF</th>
                    <th scope="col">Valor NF</th>
                    <th scope="col">Fornecedor</th>
                    <th scope="col">Origem</th>
                    <th scope="col">Cliente</th>
                    <th scope="col">Produto</th>
                    <th scope="col">Descarga</th>
                    {% if user.is_superuser%}
                    <th scope="col" class="text text-center">Comiss.</th>
                    {% endif %}


                </tr>
            </thead>
            <tbody>
                {% for carga in object_list %}
                {% if "pgcomissaoa=False" in request.get_full_path %}
                {% if carga.comissaocasca > 1 %}
                <tr>
                    <td>{{ forloop.counter }}</td>

                    <td>{{ carga.pedido }}</td>



                    {% if 'GDX' in carga.transp|upper %}
                    <td><strong>{{ carga.transp|title }}</strong></td>
                    {% else %}
                    <td style="background-color: rgba(102,0,102,0.3);font-weight: bold;">{{ carga.transp|title }}</td>
                    {% endif %}


                    



                    <td>{{ carga.situacao }}</td>

                    {% if carga.ordem %}
                    <td class="text-success"><em>Enviada</em></td>
                    {% else %}
                    <td class="text-danger"><em>Não Env.</em></td>
                    {% endif %}

                    <td>{{ carga.data|date:"SHORT_DATE_FORMAT" }}</td>

                    <td>{{ carga.placa|upper|slice:":3"}} {{ carga.placa|upper|slice:"3:"}}</td>

                    <td>{{ carga.motorista|title }}</td>

                    {% if carga.peso == 0 %}
                    <td class="text-warning"><strong>{{ carga.veiculo|intcomma }}</strong></td>
                    {% elif carga.peso < 18000 and carga.peso > 0  %}
                    <td style="color:darkorange"><i>{{ carga.peso|intcomma }} </i></td>
                    {% else %}
                    <td>{{ carga.peso|intcomma }} </td>
                    {% endif %}

                    {% if carga.notafiscal == None %}
                    <td class="text-danger"><strong>Sem NF</strong></td>
                    {% elif carga.notafiscal|length <= 4 %}
                    <td>
                        {{ carga.notafiscal }}
                    </td>
                    {% elif carga.notafiscal|length <= 6 %}
                    <td>
                        {{ carga.notafiscal|slice:"-6:-3" }}.{{ carga.notafiscal|slice:"-3:" }}
                    </td>
                    {% elif carga.notafiscal|length > 6 and carga.notafiscal|length < 8 %}
                    <td>
                        {{ carga.notafiscal|slice:"-9:-6" }}.{{ carga.notafiscal|slice:"-6:-3" }}.{{ carga.notafiscal|slice:"-3:" }}
                    </td>

                    {% elif carga.notafiscal|length == 8 %}
                    <td>
                        0{{ carga.notafiscal|slice:"-9:-6" }}.{{ carga.notafiscal|slice:"-6:-3" }}.{{ carga.notafiscal|slice:"-3:" }}
                    </td>
                    {% elif carga.notafiscal|length > 8 %}
                    <td>
                        {{ carga.notafiscal|slice:"-9:-6" }}.{{ carga.notafiscal|slice:"-6:-3" }}.{{ carga.notafiscal|slice:"-3:" }}
                    </td>
                    {% else %}
                    <td>{{carga.notasfiscal}}</td>
                    {% endif %}

                    {% if carga.valornf == None %}
                    <td align=left>R$ &nbsp;&nbsp;&nbsp;&nbsp;- </td>
                    {% else %}

                    <td>R$
                        {{ carga.valornf }}
                    </td>
                    {% endif %}

                    <td>{{ carga.pedido.fornecedor.nome|title }}</td>

                    <td>{{ carga.pedido.fornecedor.cidade.cidade }}</td>

                    <td>{{ carga.pedido.cliente|upper }}</td>
                    <td>{{ carga.pedido.produto }}</td>
                    <td>{{ carga.data_agenda }}</td>

                    {% if user.is_superuser%}
                    {% if carga.comissaocasca > 1 %}

                    {% if carga.pgcomissao == True %}

                    <td align=center><b>R$
                            {{ carga.vpcomissaoc|floatformat:2 }}</b></td>
                    {% elif carga.pgcomissao == False and carga.vpcomissaoc > 0 %}
                    <td align=center><b>R$
                            {{ carga.vpcomissaoc|floatformat:2 }}</b></td>
                    {% else %}
                    <td align=center><b>R$
                            {{ carga.comissaocasca|floatformat:2 }}</b></td>
                    {% endif %}
                    {% else %}
                    <td align=center>- </td>

                    {% endif %}
                    {% else %}
                    {% endif %}

                </tr>
                {% else %}
                {% endif %}
                {% else %}
                <tr>
                    <td>{{ forloop.counter }}</td>

                    <td>{{ carga.pedido }}</td>

                    {% if 'GDX' in carga.transp|upper %}
                    <td><strong>{{ carga.transp|title }}</strong></td>
                    {% else %}
                    <td style="background-color: rgba(102,0,102,0.3);font-weight: bold;">{{ carga.transp|title }}</td>
                    {% endif %}

                    

                    <td>{{ carga.situacao }}</td>

                    {% if carga.ordem %}
                    <td class="text-success"><em>Enviada</em></td>
                    {% else %}
                    <td class="text-danger"><em>Não Env.</em></td>
                    {% endif %}

                    <td>{{ carga.data|date:"SHORT_DATE_FORMAT" }}</td>

                    <td>{{ carga.placa|upper|slice:":3"}}-{{ carga.placa|upper|slice:"3:"}}</td>

                    <td>{{ carga.motorista|title }}</td>

                    {% if carga.peso == 0 %}
                    <td class="text-warning"><strong>{{ carga.veiculo|intcomma }}</strong></td>
                    {% elif carga.peso < 18000 and carga.peso > 0  %}
                    <td style="color:darkorange"><i>{{ carga.peso|intcomma }} </i></td>
                    {% else %}
                    <td>{{ carga.peso|intcomma }} </td>
                    {% endif %}

                    {% if carga.notafiscal == None %}
                    <td class="text-danger"><strong>Sem NF</strong></td>
                    {% elif carga.notafiscal|length <= 4 %}
                    <td>
                        {{ carga.notafiscal }}
                    </td>
                    {% elif carga.notafiscal|length <= 6 %}
                    <td>
                        {{ carga.notafiscal|slice:"-6:-3" }}.{{ carga.notafiscal|slice:"-3:" }}
                    </td>
                    {% elif carga.notafiscal|length > 6 and carga.notafiscal|length < 8 %}
                    <td>
                        {{ carga.notafiscal|slice:"-9:-6" }}.{{ carga.notafiscal|slice:"-6:-3" }}.{{ carga.notafiscal|slice:"-3:" }}
                    </td>

                    {% elif carga.notafiscal|length == 8 %}
                    <td>
                        0{{ carga.notafiscal|slice:"-9:-6" }}.{{ carga.notafiscal|slice:"-6:-3" }}.{{ carga.notafiscal|slice:"-3:" }}
                    </td>
                    {% elif carga.notafiscal|length > 8 %}
                    <td>
                        {{ carga.notafiscal|slice:"-9:-6" }}.{{ carga.notafiscal|slice:"-6:-3" }}.{{ carga.notafiscal|slice:"-3:" }}
                    </td>
                    {% else %}
                    <td>{{carga.notasfiscal}}</td>
                    {% endif %}

                    {% if carga.valornf == None %}
                    <td align=left>R$ &nbsp;&nbsp;&nbsp;&nbsp;- </td>
                    {% else %}

                    <td>R$
                        {{ carga.valornf }}
                    </td>
                    {% endif %}

                    <td>{{ carga.pedido.fornecedor.nome|title }}</td>

                    <td>{{ carga.pedido.fornecedor.cidade.cidade }}</td>

                    <td>{{ carga.pedido.cliente|upper }}</td>
                    <td>{{ carga.pedido.produto }}</td>
                    {% if carga.data_agenda %}
                    <td>{{ carga.data_agenda|date:"SHORT_DATE_FORMAT" }}</td>
                    {% else %}
                    <td> - </td>
                    {% endif %} 
                    {% if user.is_superuser%}
                    {% if carga.comissaocasca > 1 %}

                    {% if carga.pgcomissao == True %}

                    <td align=center><b>R$
                            {{ carga.vpcomissaoc|floatformat:2 }}</b></td>
                    {% elif carga.pgcomissao == False and carga.vpcomissaoc > 0 %}
                    <td align=center><b>R$
                            {{ carga.vpcomissaoc|floatformat:2 }}</b></td>
                    {% else %}
                    <td align=center><b>R$
                            {{ carga.comissaocasca|floatformat:2 }}</b></td>
                    {% endif %}
                    {% else %}
                    <td align=center>- </td>

                    {% endif %}
                    {% else %}
                    {% endif %}

                </tr>
                {% endif %}
                {% endfor %}
            </tbody>
        </table>
        
            {% if agendatotal.veiculo__sum == None %}  
                    <div class="container">
                        <div class="row linhatitulototal">
                                      
                            <div class="col titulototal">
                                {% if pesototal.peso__sum == None %}                    
                                {% else %}
                                <p ><strong>Carregado: <i>{{ pesototal.peso__sum }} Kg</i></strong></p>
                                {% endif %}  
                            </div>  
                            
                        </div>
                    </div>                    
                    {% else %}
                    <div class="container">
                        <div class="row linhatitulototal">
                            <div class="col titulototal">
                                {% if agendatotal.veiculo__sum == None %}                    
                                {% else %}
                                <p><strong>Agendado: <i >{{ agendatotal.veiculo__sum }} Kg</i></strong></p>
                                {% endif %}        
                            </div>             
                            <div class="col titulototal">
                                {% if pesototal.peso__sum == None %}                    
                                {% else %}
                                <p ><strong>Carregado: <i>{{ pesototal.peso__sum }} Kg</i></strong></p>
                                {% endif %}  
                            </div>  
                            {% if pesototal.peso__sum == None and agendatotal.peso__sum == None %}
                            {% else %}
                            <div class="col titulototal">                                
                                <p ><strong>Total: <i >{{ pesototal.peso__sum|addition:agendatotal.veiculo__sum }} Kg</i></strong></p>
                            </div>  
                            {% endif %}
                        </div>
                    </div>
                {% endif %}
                
        

        
       
        

    </div>
    {% endif %}


</body>
<br>
<script>


</script>
<!-- jQuery -->
<script type="text/javascript" src="{% static 'js/jquery.min.js' %}"></script>
<!-- Bootstrap tooltips -->
<script type="text/javascript" src="{% static 'js/popper.min.js' %}"></script>
<!-- Bootstrap core JavaScript -->
<script type="text/javascript" src="{% static 'js/bootstrap.min.js' %}"></script>
<!-- MDB core JavaScript -->
<script type="text/javascript" src="{% static 'js/mdb.min.js' %}"></script>
<!-- Your custom scripts (optional) -->
<script type="text/javascript"></script>
<!-- MDBootstrap Datatables  -->
<script type="text/javascript" src="{% static 'js/addons/datatables.min.js' %}"></script>


<script>

    $(".simplehighlight").click(function() {
            $(this).toggleClass('clicked');
        });

    $(document).ready(function () {
        $('#cargas5').DataTable({
            "searching": false
        });
        $('.dataTables_length').addClass('bs-select');
    });

    window.setTimeout(function () {
        $(".alert").fadeTo(500, 0).slideUp(500, function () {
            $(this).remove();
        });
    }, 3000);



    $("table tbody").on("click", "td", function () {
        $(this).toggleClass("selected");
    });

    document.getElementById('select-all').onclick = function () {
        var checkboxes = document.querySelectorAll('input[type="checkbox"]');
        for (var checkbox of checkboxes) {
            checkbox.checked = this.checked;
        }
    }

    // function Mudarestado(el) {
    //     var display = document.getElementById(el).style.display;
    //     if (display == "none")
    //         document.getElementById(el).style.display = 'block';
    //     else
    //         document.getElementById(el).style.display = 'none';
    // }


    function Ocultarfiltros(el) {
        if (document.getElementById("filtro").classList.contains('hide')) {
            document.getElementById(el).classList.remove('hide');            
        } else {
            document.getElementById(el).classList.add('hide');            
        }
    }

    function Mudarestado(el) {
        if (document.getElementById("secondboxout").classList.contains('hide')) {
            document.getElementById(el).classList.remove('hide');            
        } else {
            document.getElementById(el).classList.add('hide');            
        }
    }

    // $(document).ready('change', function Hidetransp(el) {
    //     var e = document.getElementById(el).style.display;
    //     if (e.style.display){
    //     e.style.display = ((e.style.display!='none') ? 'none' : 'block');
    //     }
    //     else {e.style.display='block'}
    //     })


    $(document).ready(function () {
        $("#btnExport").click(function (e) {
            e.preventDefault();
            var table_div = document.getElementById('cargasfiltro2');
            // esse "\ufeff" é importante para manter os acentos         
            var blobData = new Blob(['\ufeff' + table_div.outerHTML], { type: 'application/vnd.ms-excel' });
            var url = window.URL.createObjectURL(blobData);
            var a = document.createElement('a');
            a.href = url;
            a.download = 'Cargas.xls'
            a.click();
        });
    });

    function createPDF() {
        var sTable = document.getElementById('cargasfiltro2').innerHTML;

        var style = "<style>";
        style = style + "table {width: 100%;font: 12px Calibri;  margin-top: 60px;}";
        style = style + "table, th, td {border: solid 1px #DDD; border-collapse: collapse;";
        style = style + "white-space: nowrap;";
        style = style + "padding: 2px 3px;text-align: center;}";
        style = style + "</style>";

        // CREATE A WINDOW OBJECT.
        var win = window.open('', '', "_blank", 'height=700,width=700');

        win.document.write('<html><head>');
        win.document.write('<title>{% for pedido in pedidos %}{{ pedido.contrato }} | {{ pedido.fornecedor.nome|title}}{% endfor%} </title>');   // <title> FOR PDF HEADER.
        win.document.write(style);          // ADD STYLE INSIDE THE HEAD TAG.
        win.document.write('</head>');
        win.document.write('<body>');
        win.document.write(sTable);         // THE TABLE CONTENTS INSIDE THE BODY TAG.
        win.document.write('<embed width="100%" height="100%" src="data:application/pdf;base64,' + base64 + '" type="application/pdf"/>');
        win.document.write('</body></html>');

        win.document.close(); 	// CLOSE THE CURRENT WINDOW.

    }



    $(document).ready(function () {
        $('#id_data').mask('00/00/0000');
        $('#id_data__gte').mask('00/00/0000');
        $('#id_data__lte').mask('00/00/0000');
    })
    
    $(document).ready(function () {
        $('#id_data_agenda').mask('00/00/0000');
        $('#id_data_agenda__gte').mask('00/00/0000');
        $('#id_data_agenda__lte').mask('00/00/0000');
    })

    $(document).ready(function () {
        var listamot = [{% for c in cargas|dictsort:"motorista" %} "{{ c.motorista|safe }}", {% endfor %}]
        var lista1 = [...new Set(listamot)];
    $("#id_motorista__icontains").autocomplete({
        source: lista1
    })
    })


    $(document).ready(function () {
        var listaplaca = [{% for c in cargas|dictsort:"placa" %} "{{ c.placa|safe }}", {% endfor %}]
        var listaplaca1 = [...new Set(listaplaca)];
    $("#id_placa__icontains").autocomplete({
        source: listaplaca1
    })
    })


    const getCellValue = (tr, idx) => tr.children[idx].innerText || tr.children[idx].textContent;

    const comparer = (idx, asc) => (a, b) => ((v1, v2) => 
        v1 !== '' && v2 !== '' && !isNaN(v1) && !isNaN(v2) ? v1 - v2 : v1.toString().localeCompare(v2)
        )(getCellValue(asc ? a : b, idx), getCellValue(asc ? b : a, idx));

    // do the work...
    document.querySelectorAll('th').forEach(th => th.addEventListener('click', (() => {
        const table = th.closest('table');
        const tbody = table.querySelector('tbody');
        Array.from(tbody.querySelectorAll('tr'))
        .sort(comparer(Array.from(th.parentNode.children).indexOf(th), this.asc = !this.asc))
        .forEach(tr => tbody.appendChild(tr) );
    })));


    $('#badgetransp').hover(
        function() {
            $('#badgetransp').removeClass('badge-info').addClass('badge-warning');
        },
        function() {
            $('#badgetransp').removeClass('badge-warning').addClass('badge-info');
        }
        );

    


    
</script>



<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<!-- jQuery -->
<script type="text/javascript" src="{% static 'js/jquery.min.js' %}"></script>


<!--Autocomplete-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css">
<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>


<!-- jQuery Masks-->
<script type="text/javascript" src="{% static 'js/jquery.mask.js' %}"></script>


<script type="text/javascript">

</script>
